<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml"
       xmlns:h="http://xmlns.jcp.org/jsf/html"
       xmlns:p="http://primefaces.org/ui"
       xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
       xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
    </h:head>
    <h:body>
        <h:form id="miform">
            <h1 class="estilo-titulo">Mantenimiento de menus</h1>
            <p:tabView  prependId="false" >
                <p:tab title="Detalle" >
                    <div class="ui-g" >
                        <div class="ui-g-12" style="width: 100%; padding: 0 !important;">
                            <p:menubar styleClass="custom-menubar">
                                <p:menuitem value="Nuevo" 
                                            icon="pi pi-plus" 
                                            update="miform"
                                             styleClass="custom-menuitem"
                                            action="#{mttMenu.nuevo()}"
                                            />
                                <p:menuitem value="Guardar" 
                                            icon="pi pi-save" 
                                            update="miform:menuTree"
                                             styleClass="custom-menuitem"
                                            action="#{mttMenu.guardarMenu()}"
                                            />
                                <p:menuitem value="eliminar" 
                                            icon="pi pi-trash" 
                                             styleClass="custom-menuitem"
                                            action="#{mttMenu.confirmarEliminarMenu()}"
                                            />
                                <p:menuitem value="imprimir" 
                                            icon="pi pi-print" 
                                             styleClass="custom-menuitem"
                                            action="#{mttMenu.imprimir()}"
                                            />
                            </p:menubar>
                        </div>
                        <div style="width: 35%;
                             float: left;
                             box-sizing: border-box;">
                            <p:tree id="menuTree"  value="#{mttMenu.root}" var="mt" selectionMode="single"  
                                    dynamic="false" highlight="true" style="width: 100%">
                                <p:ajax event="select" update="miform:detalleMttMenu"
                                        listener="#{mttMenu.onNodeSelect}" />
                                <p:treeNode  expandedIcon="pi pi-folder-open" collapsedIcon="pi pi-folder" >
                                    <h:outputText value="#{mt.name}" />
                                </p:treeNode>
                                <p:treeNode type="Submenu" icon="pi pi-file" >
                                    <h:outputText value="#{mt.name}" />
                                </p:treeNode>
                                <p:treeNode type="pantalla" icon="pi pi-th-large">
                                    <h:outputText value="#{mt.name}" />
                                </p:treeNode>
                            </p:tree>
                        </div>
                        <div class=" ui-fluid" style="width: 65%;
                             float: left;
                             box-sizing: border-box;">
                                <p:panelGrid id="detalleMttMenu" columns="2" layout="grid"
                                             styleClass="panel-stilo">
                                    <p:outputLabel for="textNomModulo" value="Modulo" />
                                    <p:selectOneMenu id="textNomModulo" value="#{mttMenu.itemCodModulo}">
                                        <p:ajax listener="#{mttMenu.obtenerPantallas()}" update="textNomPantalla textNombrePadre" />
                                        <f:selectItem itemLabel="Seleccione" itemValue="" />
                                        <f:selectItems value="#{mttMenu.itemModulo}" />
                                    </p:selectOneMenu>

                                    <p:outputLabel for="textNombre" value="Nombre del menu" />
                                    <p:inputText id="textNombre" value="#{mttMenu.menuSelect.nommenu}" onkeypress="return validarSoloLetras(event)" />

                                    <p:outputLabel for="textNomPantalla" value="Pantalla" />
                                    <p:selectOneMenu id="textNomPantalla" value="#{mttMenu.itemCodPantalla}">
                                        <f:selectItem itemLabel="Seleccione" itemValue="" />
                                        <f:selectItems value="#{mttMenu.itemPantalla}" />
                                    </p:selectOneMenu>

                                    <p:outputLabel for="textNombrePadre" value="Menu padre" />
                                    <p:selectOneMenu id="textNombrePadre" value="#{mttMenu.itemCodMenu}">
                                        <f:selectItem itemLabel="Seleccione" itemValue="" />
                                        <f:selectItems value="#{mttMenu.itmPadre}" />
                                    </p:selectOneMenu>

                                    <p:outputLabel for="textDescripcionMenu" value="Descripcion" />
                                    <p:inputTextarea id="textDescripcionMenu" value="#{mttMenu.menuSelect.dscmenu}" rows="5" cols="25" counterTemplate="{0} characters remaining." autoResize="false" onkeypress="return validarSoloLetras(event)" style="resize: both; max-width: 100%; background-color: rgba(0, 0, 0, 0.1);">
                                    </p:inputTextarea>

                                    <p:outputLabel for="textOrden" value="Orden" />
                                    <p:inputText id="textOrden" value="#{mttMenu.menuSelect.ordenes}" onkeypress="soloNumeros(event)" />

                                    <p:outputLabel for="textVersion" value="Version" />
                                    <p:inputText id="textVersion" value="#{mttMenu.menuSelect.version}" />
                                </p:panelGrid>
                        </div>
                    </div>
                </p:tab>
            </p:tabView>
        </h:form>
        <p:confirmDialog  global="true" 
                          showEffect="fade" 
                          hideEffect="fade"
                          id="deleteMenu"
                          header="Confirmar eliminar el menu" 
                          widgetVar="deleteMenu"
                          message="Esta seguro de eliminar el menu ?">
            <h:form>
                <p:commandButton value="Yes"  
                                 icon="pi pi-check" 
                                 update="miform"
                                 actionListener="#{mttMenu.eliminarMenu()}"
                                 onclick="PF('deleteMenu').hide();"/>
                <p:commandButton value="No" 
                                 icon="pi pi-times" 
                                 onclick="PF('deleteMenu').hide();"
                                 />
            </h:form>
        </p:confirmDialog>
        <!--dialogo para los msj-->
        <p:dialog id="busc" 
                  header="Informacion" 
                  widgetVar="dlgMensajes"
                  width="70%" height="40%"
                  modal="true"
                  >
            <p:messages 
                id="msj"
                showDetail="true" 
                closable="false"
                >
                <p:autoUpdate />
            </p:messages>
        </p:dialog>
    </h:body>

</html>

